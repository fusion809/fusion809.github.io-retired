<!-- 3 -->
## Preparation
Boot a Linux system (whether live or installed) from which you can install Gentoo Linux. This system you boot and use to install Gentoo Linux will henceforth be referred to as the **host system**. The Gentoo Handbook recommends using either the Gentoo minimal CD image or Gentoo DVD image as a live session from which to install Gentoo. I personally recommend using whichever distribution whether live or installed you are most comfortable with. I have successfully used the Gentoo DVD, SystemRescueCd (a Gentoo-based live medium for rescuing damaged Linux systems and recovering data), Manjaro Linux (specifically its 17.0 live medium) and Funtoo Linux as the host system on which I installed Gentoo. The bare minimum this system needs is (program hyperlinks are to the corresponding man page. You can view the man pages with `man <PROG>` but web pages can be easier to search):

* A disk-partitioning program like {% include Links/man.html prog="cfdisk" no="8" puncr="," %} {% include Links/man.html prog="fdisk" no="8" puncr="," %} {% include Links/man.html prog="gdisk" no="8" %} and GParted. cfdisk and fdisk are provided by the {% include Packages/generic.html package="util-linux" %} package, while {% include Packages/generic.html package="gptfdisk" %} provides gdisk. {% include Packages/generic.html package="util-linux" %} is included on most Linux systems, if not all, by default. 
* A program to make the file systems you want/need. {% include Packages/generic.html package="e2fsprogs" %} provides {% include Links/man.html prog="mke2fs" link="mkfs.ext2" no="8" puncr="," %} {% include Links/man.html prog="mke2fs" link="mkfs.ext3" no="8" %} and {% include Links/man.html prog="mke2fs" link="mkfs.ext4" no="8" puncr="," %} while {% include Packages/generic.html package="dosfstools" %} provides {% include Links/man.html prog="mkfs.fat" no="8" puncr="." %} {% include Packages/generic.html package="xfsprogs" %} provides {% include Links/man.html prog="mkfs.xfs" no="8" %} and {% include Packages/generic.html package="btrfs-progs" %} provides {% include Links/man.html prog="mkfs.btrfs" no="8" puncr="." %} Further details on file systems and which you will need can be found in the [File systems](#file-systems) section of this post.
* {% include Links/man.html prog="chroot" no="1" %} and {% include Links/man.html prog="cp" no="1" puncr="," %} programs provided by the GNU Core Utilities package (package name: {% include Packages/generic.html package="coreutils" puncr=")." %}
* {% include Links/man.html prog="mount" no="1" puncr="," %} which is provided by {% include Packages/generic.html package="util-linux" %} too. 
* {% include Links/man.html prog="bzip2" no="1" %} and {% include Links/man.html prog="tar" no="1" %} are required for decompressing stage3 tarballs. 
* Some means of downloading the required files. Most distributions have either cURL or GNU wget installed by default, both are suitable for this purpose. 

If you have enough CPU power and RAM it would be ideal if the system you boot has an X server running so that you can copy instructions from either this guide or the Gentoo Handbook. 

You will also need to set up a network connection for use during installation. Beware you will need to download at least the stage3 tarball which is roughly, as of 13 June 2017, 100-300 MB in size, depending on the specific architecture and software characteristics of the stage3. The size of the stage3 tarball is likely to change in the future to see its current size see {% include Links/basic.html url="https://gentoo.org/downloads/" puncr="." %} It would also be advisable to download a Portage tree snapshot during the installation which is a further 70 MB in size. Quite often one will also need to update a few packages which will take some extra data (which greatly depends on the specifics of the updates). I would say the minimum data allowance you should have before you try to install a Gentoo system is 300 MB and that greatly depends on your build settings, your architecture, your preferences, <i>etc.</i>

### Partitioning
It is important to partition your disk appropriately before installing Gentoo. You can do this using graphical tools (like GParted) or command-line tools. My personal preference is command-line tools, mostly because they are less likely to crash on you and give you grief, but they are also less user-friendly. Regardless of method one should be able to specify a *type* for the partitions, which is important. The most popular command-line tools for partitioning disks include: cfdisk, fdisk and gdisk. fdisk and gdisk are specific to master boot record (MBR) and GUID Partition Table (GPT) partition tables, respectively, while cfdisk can be used for both. cfdisk is my favourite tool and is probably the easiest command-line partitioning tool to use for beginners. cfdisk has a ncurses-based interface, which can be easier to use than the standard command-line interface of fdisk and gdisk. 

MBR is an older partition table from the 1980s with a limitation placed on partition size of just 2 TB. Back in the 1980s this limitation was no big dilemma as 2 TB was way out of their league. Nowadays, however, 2 TB is within the size range of modern disk drives. MBR is more popular, but not exclusive, to systems with BIOS firmware. GPT is a newer partition table that can hold partitions with a size of up to 9 ZB (where each zetabyte is equal to one billion terabytes).

There is only one partition that is compulsory for all Gentoo Linux systems: the root partition. It is where all files belonging to the distribution, including your personal files (unless they are stored on a separate home partition) and package files, are stored. This partition should have a "Linux" type. If there is no home partition it is usually the largest of all partitions used by the Gentoo system.

Another partition that is also required if you want to, or need to, manage the bootloader using Gentoo Linux (as opposed to other operating systems you may be dual-booting with) is a BIOS boot partition (BBP) / EFI system partition (ESP). If you are using a legacy BIOS system (like a PC that originally came with Windows 7 or earlier) you will need a BBP. If you are using a system with UEFI firmware (like systems that originally had macOS or Windows 8 or later installed on it) you will need an ESP, despite what the [Gentoo Handbook's default partitioning scheme](https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Disks#Default_partitioning_scheme) suggests you will **not** need a BBP with an ESP, I know this for a fact as I am typing this post from a Gentoo Linux system installed on a laptop with UEFI firmware and the disk Gentoo is installed to only has an EFI system and a root partition. The BBP (BIOS) and ESP (UEFI) is where all files essential to your bootloader, along with your Linux images (vmlinuz) and initramfs are kept. 

The Gentoo Handbook also recommends that BIOS systems have an additional partition called a boot partition (BP, where bootloader/kernel images/initramfs files are kept), but I have successfully managed to install (and run this installation) Gentoo Linux to a VirtualBox VM with only a BBP that was 128 MB in size (which is the size the Gentoo Handbook recommends for the BP). If you are dual-booting and planning to set up the bootloader (like GRUB) using your other operating system you can ignore this requirement and all further mentions of this partition. BBPs usually have the BIOS boot type, while ESPs have the EFI type. This partition can usually be just 128 MB in size, although a larger partition may be required if you wish to have several different kernels available to boot from your bootloader.  

If your system has less than 8 GB RAM it will likely be helpful to have a swap partition also, although alternatives like swap files and zram are available. Swap space (both in the form of swap files and swap partitions) is used when RAM is used up, so if the total amount of RAM one has available is fairly low it is very likely that swap space will come in handy. Swap partitions also have their own unique type that is often referred to as "Linux swap" in the menus of the command-line partitioning tools. Swap partition can be shared by multiple installed distributions. Sometimes at greater than 8 GB RAM swap partitions will still come in handy, but for most users swap space is not needed when so much RAM is available. There are several recommendations floating around about the size of swap partitions but here are mine:

{% include_relative 03a-swap-size.html %}

These are conservative, however, I run several VirtualBox VMs for Linux with 4 GB RAM and no swap space and I have never experienced any grief because of this. 

If you want to back up your personal data (like your desktop environment configuration, your application settings, your documents, *etc.*) in case you ever have to reinstall Gentoo or install a new operating system in Gentoo's place you may wish to create a separate home partition. This home partition is usually of the same type as the root partition, namely the Linux type. 

Some people may wish use Logical Volume Manager (LVM) to manage their partitions, which may have some advantages (like backing up using snapshots) but in my experience is just a heap of unnecessary hassle. For further details, such as on advantages, refer to the [Gentoo Wiki's article on LVM](https://wiki.gentoo.org/wiki/LVM).

### File systems
Each of the aforementioned partitions, except the swap partition, are useless if they have no file system on them. Swap partitions do not have a file system but they still need the command {% include Links/man.html prog="mkswap" no="8" %} run on them. A BBP should have an ext2 file system on it, while an ESP should have a FAT32 file system. Root and home partitions, on the other hand, have a file system on them that is entirely up to the user. Further information on file systems can be found in the [Gentoo Handbook](https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Disks#Creating_file_systems). The most popular and stable choices for the file systems on root and home partitions are (with each linked to the corresponding article on the Gentoo Wiki):

{% capture list %}
* [Btrfs](https://wiki.gentoo.org/wiki/Btrfs)
* [ext2](https://wiki.gentoo.org/wiki/ext2)
* [ext3](https://wiki.gentoo.org/wiki/ext3)
* [ext4](https://wiki.gentoo.org/wiki/ext4)
* [XFS](https://wiki.gentoo.org/wiki/XFS)
{% endcapture %}

{% include Layouts/column.html content=list no="8" %} 
Of these ext4 is probably the most popular and is the one I personally use. ext2 and ext3 are fairly infrequently used nowadays for root and home partitions as they have been largely superseded by ext4. If you are uncertain as to which file system to use for your Gentoo system use ext4! It is simpler, better-tested and more reliable than most of the alternatives. 

Btrfs is believed to be, by some (including a developer of ext4), the next generation file system for Linux likely to supersede ext4 as its most popular file system. Btrfs is more popular on solid disk drives (SSDs), due to possible performance benefits (which are not conclusive, see, for example, [this set of test results](http://openbenchmarking.org/result/1608041-LO-LINUX44BT99) on Phoronix for a SSD with the 4.7 kernel), although it can be just as easily used on hard disk drives (HDDs). Btrfs can also take file system snapshots that one can use for backup purposes. I have had issues that seem to be related to it on openSUSE with HDDs and it seems like I am not the only one as reports of file system corruption are considered common with it. Security, bug fixes (including for file system corruption issues) and major improvements are not ported to older versions of the kernel so to keep a system with it running properly it is advisable to use a bleeding-edge kernel (so always using the latest stable kernel available from the Portage tree).  

XFS is a file system I have mostly seen used for home partitions and not root partitions, although CentOS 7 uses XFS as the default file system on its root partition so I would not expect any major dramas arising from using it. Its main limitations are that it cannot be resized (hence making it impossible to resize partitions with it on them) and deleting multiple files can take longer than it would on Btrfs and ext4. It may also be less forgiving in cases of hardware problems. 

A few other file systems are available, but I know fairly little about them and have never used them on Linux, they include:

* [Journaled File System](https://wiki.gentoo.org/wiki/JFS) (JFS) &mdash; IBM's high-performance file system. 
* ReiserFS &mdash; originally developed by [Hans Reiser](https://en.wikipedia.org/wiki/Hans_Reiser), while open-source contributors have continued development after Reiser was imprisoned in 2008 (for murdering his wife) its development has slowed down. 
* [ZFS](https://wiki.gentoo.org/wiki/ZFS) &mdash; originally developed by Sun Microsystems and used by OpenSolaris. Also used by the *BSDs like FreeBSD. 
